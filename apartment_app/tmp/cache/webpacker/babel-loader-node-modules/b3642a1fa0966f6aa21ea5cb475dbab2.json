{"ast":null,"code":"var _jsxFileName = \"/Users/learnacademy/Desktop/week-9/apartment-app-ericagates/apartment_app/app/javascript/components/App.js\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Home from './pages/Home';\nimport ApartmentIndex from './pages/ApartmentIndex';\nimport ApartmentShow from './pages/ApartmentShow';\nimport ApartmentNew from './pages/ApartmentNew';\nimport ApartmentEdit from './pages/ApartmentEdit';\nimport MyApartment from './pages/MyApartment';\nimport NotFound from './pages/NotFound'; //import mockApts from './mockApartments.js'\n\nvar App = /*#__PURE__*/function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this, props);\n\n    _this.createNewApartment = function (newApartment) {\n      return fetch(\"/apartments\", {\n        body: JSON.stringify(newApartment),\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: \"POST\"\n      }).then(function (response) {\n        if (response.status === 200) {\n          _this.componentDidMount();\n        } else {\n          alert(\"Please check your form\");\n        }\n\n        return response;\n      })[\"catch\"](function (errors) {\n        console.log(\"create errors\", errors);\n      });\n    };\n\n    _this.editApartment = function (editApartment, id) {\n      return fetch(\"/apartments/\".concat(id), {\n        // converting an object to a string\n        body: JSON.stringify(editApartment),\n        // specify the info being sent in JSON and the info returning should be JSON\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        // HTTP verb so the correct endpoint is invoked on the server\n        method: \"PATCH\"\n      }).then(function (response) {\n        // if the response is good  - reload the cats\n        if (response.status === 200) {\n          _this.componentDidMount();\n        }\n\n        return response;\n      })[\"catch\"](function (errors) {\n        console.log(\"edit errors\", errors);\n      });\n    };\n\n    _this.deleteApartment = function (id) {\n      console.log(\"deletedApartmentID: \", id);\n      return fetch(\"/apartments/\".concat(id), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        method: \"DELETE\"\n      }).then(function (response) {\n        if (response.status === 200) {\n          _this.componentDidMount();\n        } else {\n          alert(\"Not successfully deleted\");\n        }\n\n        return response;\n      })[\"catch\"](function (errors) {\n        console.log(\"delete errors:\", errors);\n      });\n    };\n\n    _this.state = {\n      apartments: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      fetch(\"/apartments\").then(function (response) {\n        if (response.status === 200) {\n          return response.json();\n        }\n      }).then(function (apartmentsArray) {\n        _this2.setState({\n          apartments: apartmentsArray\n        });\n      })[\"catch\"](function (errors) {\n        console.log(\"index errors\", errors);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          logged_in = _this$props.logged_in,\n          sign_in_route = _this$props.sign_in_route,\n          sign_out_route = _this$props.sign_out_route,\n          current_user = _this$props.current_user;\n      return /*#__PURE__*/React.createElement(Router, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Switch, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(Home, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/index\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ApartmentIndex, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            apartments: _this3.state.apartments,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/show/:id\",\n        render: function render(props) {\n          var id = props.match.params.id;\n\n          var apartment = _this3.state.apartments.find(function (value) {\n            return value.id === parseInt(id);\n          });\n\n          return /*#__PURE__*/React.createElement(ApartmentShow, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            apartment: apartment,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/create\",\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(ApartmentNew, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            createNewApartment: _this3.createNewApartment,\n            current_user: current_user,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 15\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }\n      }), logged_in && /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/myapartments\",\n        render: function render(props) {\n          var id = current_user.id;\n\n          var myApartments = _this3.state.apartments.filter(function (value) {\n            return value.user_id === id;\n          });\n\n          return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MyApartment, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            apartments: myApartments,\n            deleteApartment: _this3.deleteApartment,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }\n          }));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 13\n        }\n      }), logged_in && /*#__PURE__*/React.createElement(Route, {\n        exact: true,\n        path: \"/edit/:id\",\n        render: function render(props) {\n          var userid = current_user.id;\n          console.log(\"userid: \", userid);\n\n          var myApartments = _this3.state.apartments.filter(function (value) {\n            return value.user_id === userid;\n          });\n\n          console.log(\"myApartments: \", myApartments);\n          var id = props.match.params.id;\n          console.log(\"apartment id: \", id);\n          var apartment = myApartments.find(function (value) {\n            return value.id === parseInt(id);\n          });\n          console.log(\"apartment: \", apartment);\n          return /*#__PURE__*/React.createElement(ApartmentEdit, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            apartment: apartment,\n            editApartment: _this3.editApartment,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(Route, {\n        render: function render(props) {\n          return /*#__PURE__*/React.createElement(NotFound, {\n            logged_in: logged_in,\n            sign_in_route: sign_in_route,\n            sign_out_route: sign_out_route,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 13\n            }\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/learnacademy/Desktop/week-9/apartment-app-ericagates/apartment_app/app/javascript/components/App.js"],"names":["React","PropTypes","BrowserRouter","Router","Route","Switch","Home","ApartmentIndex","ApartmentShow","ApartmentNew","ApartmentEdit","MyApartment","NotFound","App","props","createNewApartment","newApartment","fetch","body","JSON","stringify","headers","method","then","response","status","componentDidMount","alert","errors","console","log","editApartment","id","deleteApartment","state","apartments","json","apartmentsArray","setState","logged_in","sign_in_route","sign_out_route","current_user","match","params","apartment","find","value","parseInt","myApartments","filter","user_id","userid","Component"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport {\n  BrowserRouter as  Router,\n  Route,\n  Switch\n} from 'react-router-dom'\nimport Home from './pages/Home'\nimport ApartmentIndex from './pages/ApartmentIndex'\nimport ApartmentShow from './pages/ApartmentShow'\nimport ApartmentNew from './pages/ApartmentNew'\nimport ApartmentEdit from './pages/ApartmentEdit'\nimport MyApartment from './pages/MyApartment'\nimport NotFound from './pages/NotFound'\n//import mockApts from './mockApartments.js'\n\nclass App extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n        apartments: []\n    }\n\n}\n\ncomponentDidMount(){\n  fetch(\"/apartments\").then(response => {\n      if(response.status === 200){\n          return(response.json())\n      }\n  }).then(apartmentsArray => {\n      this.setState({ apartments: apartmentsArray })\n  }).catch(errors => {\n      console.log(\"index errors\", errors)\n  })\n}\n\ncreateNewApartment = (newApartment) => {\n  \n  return fetch(\"/apartments\", {\n    body: JSON.stringify(newApartment),\n    headers: { \"Content-Type\": \"application/json\" },\n    method: \"POST\"\n    }).then(response => {\n    if(response.status === 200){\n        this.componentDidMount()\n    } else {\n        alert(\"Please check your form\")\n    }\n    return response\n    }).catch(errors => {\n    console.log(\"create errors\", errors)\n})\n}\n\neditApartment = (editApartment, id) => {\n  return fetch(`/apartments/${id}`, {\n      // converting an object to a string\n      body: JSON.stringify(editApartment),\n      // specify the info being sent in JSON and the info returning should be JSON\n      headers: {\"Content-Type\": \"application/json\"},\n      // HTTP verb so the correct endpoint is invoked on the server\n      method: \"PATCH\"\n  }).then(response => {\n      // if the response is good  - reload the cats\n      if(response.status === 200){ this.componentDidMount()}\n      return response\n  }).catch(errors => {\n      console.log(\"edit errors\", errors)\n  })\n}\n\ndeleteApartment = (id) => {\n  console.log(\"deletedApartmentID: \", id)\n  return fetch(`/apartments/${id}`, {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    method: \"DELETE\"\n  })\n  .then(response => {\n    if(response.status === 200){\n      this.componentDidMount()\n    }else {\n      alert(\"Not successfully deleted\")\n  }\n  return response\n    \n  })\n  .catch(errors => {\n    console.log(\"delete errors:\", errors)\n  })\n}\n\n  render() {\n    const {\n      logged_in,\n      sign_in_route,\n      sign_out_route,\n      current_user\n    } = this.props\n    return (\n      <Router>\n        <Switch>\n          <Route exact path='/' \n            render = { (props) =>\n              <Home \n                logged_in = {logged_in}\n                sign_in_route = {sign_in_route}\n                sign_out_route = {sign_out_route} \n              />\n            } \n          />\n          <Route exact path='/index' \n            render = { (props) =>\n              <ApartmentIndex \n                logged_in = {logged_in}\n                sign_in_route = {sign_in_route}\n                sign_out_route = {sign_out_route} \n                apartments={ this.state.apartments }\n              />\n            } \n          />\n          <Route exact path='/show/:id' \n            render = { (props) => {\n              let id = props.match.params.id\n              let apartment = this.state.apartments.find(value => value.id === parseInt(id))\n              return (\n              <ApartmentShow\n                logged_in = {logged_in}\n                sign_in_route = {sign_in_route}\n                sign_out_route = {sign_out_route}\n                apartment  = {apartment} \n              />)\n            }}\n          />\n          \n          <Route exact path='/create' \n            render = { (props) =>\n              <ApartmentNew \n                logged_in = {logged_in}\n                sign_in_route = {sign_in_route}\n                sign_out_route = {sign_out_route} \n                createNewApartment = {this.createNewApartment}\n                current_user = {current_user}\n              />\n            }  \n          />\n          \n          { logged_in &&\n            <Route exact path='/myapartments' \n            render = { (props) => {\n              let id = current_user.id\n              let myApartments = this.state.apartments.filter(value => value.user_id === id)\n              return(   \n              <>         \n                <MyApartment \n                logged_in = {logged_in}\n                sign_in_route = {sign_in_route}\n                sign_out_route = {sign_out_route} \n                apartments={ myApartments }\n                deleteApartment = {this.deleteApartment}\n              />\n              </>\n              )} }\n            />\n          }\n          { logged_in &&\n            <Route exact path='/edit/:id' \n              render = { (props) => {\n                let userid = current_user.id\n                console.log(\"userid: \", userid)\n                let myApartments = this.state.apartments.filter(value => value.user_id === userid)\n                console.log(\"myApartments: \", myApartments)\n                let id = props.match.params.id\n                console.log(\"apartment id: \", id)\n                let apartment = myApartments.find(value => value.id === parseInt(id))\n                console.log(\"apartment: \", apartment)\n                return (\n                <ApartmentEdit \n                  logged_in = {logged_in}\n                  sign_in_route = {sign_in_route}\n                  sign_out_route = {sign_out_route} \n                  apartment  = {apartment}\n                  editApartment = {this.editApartment}\n                />)\n              }} \n            />\n          }\n          <Route\n          render = { (props) =>\n            <NotFound \n              logged_in = {logged_in}\n              sign_in_route = {sign_in_route}\n              sign_out_route = {sign_out_route} \n            />\n          }\n          />\n        </Switch>\n\n\n      </Router>\n    )\n  }\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}